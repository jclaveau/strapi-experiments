# Basics: https://blog.dehlin.dev/strapi-v4-with-docker-and-heroku#heading-creating-herokuyml
# Deeper: https://devcenter.heroku.com/articles/build-docker-images-heroku-yml


build:
  docker:
    web:
      dockerfile: Dockerfile.heroku
      target: build-stage
  config:
    # NODE_ENV: production
    NODE_ENV: development
    DATABASE_URL: $DATABASE_URL
    QUASAR_PORT: $PORT
    STRAPI_WEBSITE_URL: https://strapi4-quasarv2.herokuapp.com
    STRAPI_URL_PREFIX: /bo

run:
  web: npx concurrently -n "Quasar,Strapi" -c "magenta,blue" "yarn --cwd /opt/quasar serve:spa" "yarn --cwd /opt/strapi start"
